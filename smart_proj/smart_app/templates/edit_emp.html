{% extends 'index.html' %}
{% load static %}
{% block body %}


<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

  <title>{% block title %}Edit Employee{% endblock %}</title>

    <meta name="description" content="">

    <!-- Favicon -->
    <link rel="icon" type="../../static/image/x-icon" href="../static/assets/img/favicon/query_img.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" >
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet">

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="../../static/assets/vendor/fonts/boxicons.css">

    <!-- Core CSS -->
    <link rel="stylesheet" href="../../../static/assets/vendor/css/core.css">
    <link rel="stylesheet" href="../../static/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" >
    <link rel="stylesheet" href="../../static/assets/css/demo.css" >

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../../static/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css">

    <link rel="stylesheet" href="../../static/assets/vendor/libs/apex-charts/apex-charts.css">

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="../../static/assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../../static/assets/js/config.js"></script>
  </head>

              <!-- Employee Management -->
  <div class="container-xxl">
    <div class="row container-p-y">
      <div class="col-xl">
          <div class="card mb-4">
            <div class="cmCardHeader card-header d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Employee Management</h5>
            </div>
            <div class="card-body">
              <form id="employee" name="employee" method="POST" data-cities-url="{% url 'ajax_load_cities' %}">
                {% csrf_token %}


                <div class="card-body">
                  <div class="d-flex align-items-start align-items-sm-center gap-4">
                    <img src="{{ed_emp.image.url}}" alt="user-avatar" class="d-block rounded" height="100" width="100" id="uploadedAvatar">
                    <div class="button-wrapper">
                      <label for="upload" class="btn btn-primary me-2 mb-4" tabindex="0">
                        <span class="d-none d-sm-block">Upload new photo</span>
                        <i class="bx bx-upload d-block d-sm-none"></i>
                        <input type="file" id="upload" name="images" value="{{ed_emp.image}}" hidden class="account-file-input" accept=".doc, .docx, .pdf, .txt, .img, .jpeg, .jpg, .png, .svg, .gif" required/>
                      </label>
                    </div>
                  </div>
                </div>
                <hr>


                <div class="switchRight">
                  <div class="switchSpace">
                    <label><b>STATUS</b>:</label>
                    <label class="switch">
                      <input type="checkbox" value="{{ed_emp.emp_status}}" id="checkbox" name="checkbox" {% if ed_emp.emp_status == True %} checked {% else %}  {% endif %}>
                      <span class="slider round"></span>
                    </label>
                  </div>
                </div>

                <div class="row">
                <div class="mb-3 col-6">
                  <label class="form-label" for="emp_code">Employee Code</label>
                  <input type="text" class="form-control" id="emp_code" name="emp_code" placeholder="Employee Code" value="{{ed_emp.emp_code}}" required />
                </div>
                <div class="mb-3 col-6">
                  <label class="form-label"  for="first_name">First Name</label>
                  <input type="text" class="form-control" id="first_name" name="first_name" placeholder="First Name" value="{{ed_emp.first_name}}" required/>
                </div>
                <div class="mb-3 col-6">
                  <label class="form-label" for="last_name">Last Name</label>
                  <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Last Name" value="{{ed_emp.last_name}}" required/>
                </div>
                <div class="mb-3 col-6">
                  <label class="form-label" for="mobile">Mobile No.</label>
                  <input type="number" class="form-control" id="mobile" name="mobile" placeholder="Mobile No."value="{{ed_emp.mobile}}" required/>
                </div>
                <div class="mb-3 col-6">
                  <label class="form-label" for="alternate">Alternative Mobile No.</label>
                  <input type="number" class="form-control" id="alternate" name="alternate" placeholder="Alternative Mobile No." value="{{ed_emp.alternate}}" required/>
                </div>
                <div class="mb-3 col-6">
                  <label class="form-label" for="email">Email</label>
                  <div class="input-group input-group-merge">
                    <input type="email" name="email" class="form-control" placeholder="Email" value="{{ed_emp.email}}" required/>
                    <span class="input-group-text" id="email">..@gmail.com</span>
                  </div>
                  <div class="form-text">You can use letters, numbers & periods</div>
                </div>

                <div class="mb-3 col-6">
                  <label class="form-label" id="r_addrerss" for="r_addrerss">Resident Address</label>
                  <input type="text" class="form-control"  name="r_addrerss" placeholder="Resident Address" value="{{ed_emp.r_address}}" required/>
                </div>

                <div class="mb-3 col-6">
                  <div class="cityStateWrap">
                    <div class="cityMain">
                      <label class="form-label">Resident state</label><br>
                      <select class="cm-dropdown dropdown-toggle" id="state" name="state" required>
                        <option disabled value="" selected="true">Select State</option>
                        <option name="state_value" selected value="{{ed_emp.r_state.SID}}">{{ed_emp.r_state}}</option>
                        {% for st in state %}
                        <option value="{{st.SID}}">{{st.stateName}}</option>
                        {% endfor %}
                      </select>
                    </div>

                    <div class="cityMain">
                      <label class="form-label">Resident City</label><br>
                      <select name="city" id="city" class="cm-dropdown dropdown-toggle" required>
                        <option value="" disabled selected > Select City</option>
                        <option selected value="{{ed_emp.r_city.CTID}}">{{ed_emp.r_city}}</option>
                      </select>
                    </div>
                  </div>
                </div>

                  <div class="mb-3 col-6">
                  <label class="form-label" for="p_address">Permanent Address</label>
                  <input type="text" class="form-control" id="p_address" name="p_address" placeholder="Permanent Address" value="{{ed_emp.p_address}}"/>

                </div>
                <div class="mb-3 col-6">
                  <div class="cityStateWrap">
                    <div class="cityMain">
                      <label class="form-label">State</label><br>
                      <select class="cm-dropdown dropdown-toggle" id="state1" name="state1" required>
                        <option value="" disabled selected >Select State</option>
                        <option selected="selected" value="{{ed_emp.p_state.SID}}">{{ed_emp.p_state}}</option>
                        {% for st in state %}
                        <option value="{{st.SID}}" selected="selected" >{{st.stateName}}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="cityMain">
                      <label class="form-label">City</label><br>
                      <select class="cm-dropdown dropdown-toggle" id="city1" name="city1" required>
                        <option value="" disabled selected >Select City</option>
                        <option selected value="{{ed_emp.p_city.CTID}}" >{{ed_emp.p_city}}</option>
                      </select>
                    </div>
                  </div>
                </div>

                  <div class="mb-3 col-6">
                  <label class="form-label" for="join_date">Join Date</label>
                    <div class="addAndRemove">
                      <input type="date" class="form-control dateNewAdd" value="{{ed_emp.join_date}}" id="join_date" data-date-format="YYYY-MM-DD" name="join_date" required >
                    </div>
                </div>

<!--                  <div class="mb-3 col-6">-->
<!--                    <label class="form-label" for="images">Upload Image</label>-->
<!--                    <input type="file" id="images" name="images" value="{{ed_emp.image}}" class="form-control" accept=".doc, .docx, .pdf, .txt, .img, .jpeg, .jpg, .png, .svg, .gif" required/>-->
<!--                  </div>-->

                  <div class="mb-3 col-12">
                  <button type="submit" class="btn btn-primary">Save Changes</button>
                  </div>

              </form>
              <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
              <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

              <script>
                $("#state").change(function () {
                  var url = $("#employee").attr("data-cities-url");
                  var stateId = $(this).val();

                  $.ajax({
                    url: url,
                    data: {
                      'state0': stateId
                    },
                    success: function (data) {
                      $("#city").html(data);
                    }
                  });

                });

                $("#state1").change(function () {
                  var url = $("#employee").attr("data-cities-url");
                  var stateId = $(this).val();

                  $.ajax({
                    url: url,
                    data: {
                      'state0': stateId
                    },
                    success: function (data) {
                      $("#city1").html(data);
                    }
                  });

                });

                $(document).ready(function() {
                    $('#checkbox').change(function() {
                        $.post("/toggle/", {
                            id: '{{workexperiance.id}}',
                            isworking: this.checked,
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                        });
                    });
                });

                $('#switchRight').text($('#checkbox').val());

                $("#checkbox").on('change', function() {
                  if ($(this).is(':checked')) {
                    $(this).attr('value', 'True');
                  } else {
                    $(this).attr('value', 'False');
                  }

                  $('#switchRight').text($('#checkbox').val());
                });


              </script>
            </div>
          </div>
      </div>
    </div>
  </div>
<!-- / Content -->


      <script src="../../static/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../../static/assets/vendor/libs/popper/popper.js"></script>
    <script src="../../static/assets/vendor/js/bootstrap.js"></script>
    <script src="../../static/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="../../static/assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="../../static/assets/vendor/libs/apex-charts/apexcharts.js"></script>

    <!-- Main JS -->
    <script src="../../static/assets/js/main.js"></script>

    <!-- Page JS -->
    <script src="../../static/assets/js/dashboards-analytics.js"></script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>
{% endblock %}